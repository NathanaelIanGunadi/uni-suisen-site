<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Application</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="/src/styles/theme.css" />
  <script type="module" src="/src/components/topbar.ts"></script>
</head>

<body>
  <div class="container py-4">
    <header class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="h3 m-0">Apply for Recommendation</h1>
      <div>
        <a href="/dashboard.html" class="btn btn-outline-secondary btn-sm me-2">Dashboard</a>
        <button id="logout" class="btn btn-outline-danger btn-sm">Logout</button>
      </div>
    </header>

    <!-- Pending message (shown if there is a PENDING submission) -->
    <section id="pending-box" class="mb-4 d-none">
      <div class="alert alert-info">
        Your recommendation request is <strong>pending review</strong>. You can
        submit a new request after the current one is finalized.
      </div>
    </section>

    <!-- Form (hidden if user has a PENDING submission) -->
    <section id="form-box" class="mb-4 d-none">
      <div class="card">
        <div class="card-body">
          <h2 class="h5 mb-3">New Submission</h2>
          <form id="applyForm" class="row g-3">
            <div class="col-12 col-md-6">
              <label for="title" class="form-label">Title<span class="text-danger">*</span></label>
              <input id="title" class="form-control" placeholder="e.g., Recommendation for XYZ Scholarship" required />
            </div>

            <div class="col-12">
              <label class="form-label">Attachments<span class="text-danger">*</span></label>
              <div id="attachments" class="d-flex flex-column gap-2">
                <!-- The first input is inserted by JS on load with required -->
              </div>
              <button id="add-file" type="button" class="btn btn-outline-secondary btn-sm mt-2">
                + Add another file
              </button>
              <div class="form-text">
                You can attach multiple files (DOC, DOCX, PDF, etc.).
              </div>
            </div>

            <div class="col-12">
              <button class="btn btn-primary" type="submit">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- History table -->
    <section>
      <h2 class="h5 mb-2">Your Previous Submissions</h2>
      <div class="table-responsive">
        <table class="table table-sm align-middle">
          <thead>
            <tr>
              <th>Title</th>
              <th>Status</th>
              <th>Created</th>
              <th>Files</th>
            </tr>
          </thead>
          <tbody id="history-body">
            <tr>
              <td colspan="4" class="text-muted">No submissions yet</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <div id="message" class="mt-3"></div>
  </div>

  <script type="module" src="/src/pages/application.ts"></script>
</body>

</html>